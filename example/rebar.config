{erl_opts, [debug_info]}.
{deps, [
    {hocon, {git, "https://github.com/emqx/hocon", {tag, "0.17.0"}}}
]}.

{relx, [{release, {example, "0.1.0"},
         [example,
          sasl,
          hocon
          ]},

        {mode, dev},

        {sys_config, false}, %% generated by hocon
        {vm_args, false}, %% generated by hocon
        {overlay, [
            {mkdir, "config/"},
            {copy, "config/example.hocon", "config/"},
            {copy, "bin/hocon", "bin/"},
            {template, "bin/entrypoint.sh", "bin/entrypoint.sh"}
        ]}
]}.

{pre_hooks,
    [ {release, "bash -c 'make -C _build/default/lib/hocon es && cp _build/default/lib/hocon/_build/es/bin/hocon bin/'"}
    ]}.

{profiles, [{prod, [{relx,
                     [%% prod is the default mode when prod
                      %% profile is used, so does not have
                      %% to be explicitly included like this
                      {mode, prod}

                      %% use minimal mode to exclude ERTS
                      %% {mode, minimal}
                     ]
            }]}]}.
